<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">

<dom-module id="sync-get">

	<script>
		class SyncGet extends Polymer.Element {
			static get is() {
				return 'sync-get';
			}
			getResource(rq) {
				let xhr = new XMLHttpRequest();
				xhr.addEventListener('load', rq.onLoad.bind(this));
				xhr.open('GET', rq.url, false);  // `false` makes the request synchronous
				if (rq.header) {
					Object.keys(rq.header).forEach(key => {
						xhr.setRequestHeader(key, rq.header[key]);
					});
				}
				xhr.send();
			}
		}

		window.customElements.define(SyncGet.is, SyncGet);
	</script>
</dom-module>

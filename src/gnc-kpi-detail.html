<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="gnc-number-formatter.html">
<link rel="import" href="shared-styles.html">

<dom-module id="gnc-kpi-detail">
	<template>
		<style include="app-grid-style"></style>
	    <style include="shared-styles">
	    	:host {
		        display: block;
		        padding: 0;
				font-size: var(--app-font-size);
				color: var(--app-primary-color);
				--app-grid-columns: 4;
				--app-grid-expandible-item-columns: 4;
	    	}
			.app-grid {
				background-color: var(--app-white-color);
			}
			.app-grid > div {
				border: 1px var(--app-hairline-color) solid;
				padding: 8px;
			}
			.app-grid > div.title-row {
				@apply --app-grid-expandible-item;
				background-color: var(--app-palegrey-color);
				padding-top: 20px;
				padding-bottom: 4px;
				font-weight: 700;
				font-size: calc(var(--app-font-size) * 1.15)
			}
			.valuecol {
				text-align: right;
			}
			.muted {
	  			color: var(--app-text-color);
			}
			.heavy {
				font-weight: 700;
			}
	    </style>
		<div class="app-grid" id="appgrid">
	    	<template is="dom-repeat" items="[[ kpis ]]">
				<div class="title-row">[[ item.title ]]</div>
				<div></div>
				<div class="valuecol heavy">Current</div>
				<div class="valuecol heavy">One month ago</div>
				<div class="valuecol heavy">One year ago</div>
				<template is="dom-repeat" items="[[ item.rows ]]" as="row">
					<div class="title">[[ row.label  ]]</div>
					<template is="dom-repeat" items="[[ row.values ]]" as="value">
						<div class$="[[ _columnClass(index) ]]">
							<gnc-number-formatter input="[[ value ]]" type="[[ row.valueType ]]"></gnc-number-formatter>
						</div>
					</template>
		  		</template>
			</template>
		</div>
	</template>

	<script>
		class GncKpiDetail extends Polymer.Element {
			static get is() {
				return 'gnc-kpi-detail';
			}
			static get properties() {
				return {
					// attributes
					kpis: Array
				}
			}
			_columnClass(index) {
				return 'valuecol' + (index === 0 ? '' : ' muted');
			}
		}

		window.customElements.define(GncKpiDetail.is, GncKpiDetail);
	</script>
</dom-module>

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<link rel="import" href="gnc-issue.html">
<link rel="import" href="gnc-issue-detail.html">
<link rel="import" href="gnc-number-formatter.html">
<link rel="import" href="shared-styles.html">

<dom-module id="gnc-recommendations-panel">
	<template>
	    <style include="shared-styles iron-flex iron-flex-alignment">
		    :host {
		        display: block;
		        padding: 0;
		    }
			.info {
				color: var(--app-primary-color);
			}
			.flex-vertical {
    			@apply --layout-vertical;
			}
			.issue {
				border-top: 1px var(--app-hairline-color) solid;
				padding: 6px 20px;
			}
	    </style>

		<iron-list items="[[ recommendations ]]">
            <template>
				<div class="issue">
					<div class$="[[ item.level ]]">[[ item.recommendation ]]</div>
					<div>
						<gnc-number-formatter input="[[ item.total ]]" type="c"></gnc-number-formatter>
					</div>
            	</div>
            </template>
		</iron-list>
	</template>

	<script>
		class GncRecommendationsPanel extends Polymer.Element {
			static get is() {
				return 'gnc-recommendations-panel';
			}
			static get properties() {
				return {
					recommendations: Array,
					selectedId: String
				}
			}
			_isProcess(item) {
				return item.type === "process";
			}
			_isShowDetails(item, id) {
				return item.id === id;
			}
			/*
			 * Event handlers
			 */
			_onRecommendationSelected(ev) {
				//ev.preventDefault();
				this.selectedId = ev.detail;
				this.dispatchEvent(new CustomEvent('gnc-recommendation-selected', {
					detail: {
						issueId: this.selectedId
					}
				}));
			}
		}

		window.customElements.define(GncRecommendationsPanel.is, GncRecommendationsPanel);
	</script>
</dom-module>
